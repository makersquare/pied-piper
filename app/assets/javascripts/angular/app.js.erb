// This is the main Angular application page.
// The Config function is run before the injector and before the RUN function
//  The run function is run after the config function.
//  An example of this is the config provides a route while the run function
// provides user authentication for the routes.
var app = angular
  .module('crmApp', [
    'ngResource',
    'ngRoute'
  ])

  // Inject necessary dependencies inside of this function below
  app.config(['$routeProvider',function($routeProvider){
  // constants first

  //providers second
  $routeProvider
    .when('/pipelines', {
      templateUrl: "<%= asset_path('angular/templates/pipelines.html') %>",
      controller: 'PipelineCtrl'})

    .when('pipelines/:pid/contact/:cid', {
      templateUrl: "<%= asset_path('angular/templates/pipelines.html') %>"
      controller: 'ContactBoxCtrl'})

    .when('pipelines/:pid', {
    }
    .otherwise({
      redirectTo: '/pipelines'
    })
    );
}])

.run(function(){
// User authentication should go here
// When the angular route is changed the ng event
// $routeChangeSuccess OR $routeChanseError is fired

});
